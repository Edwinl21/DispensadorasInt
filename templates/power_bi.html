{% extends "layout.html" %}

{% block title %}Power BI - Dispensadoras Inteligentes{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="mb-4"><i class="fas fa-chart-line"></i> Integraci贸n Power BI</h1>

    <div class="alert alert-info">
        <i class="fas fa-info-circle"></i> <strong>Configuraci贸n requerida:</strong>
        Para integrar Power BI, necesitas configurar tus credenciales de Azure AD en el archivo de configuraci贸n.
    </div>

    <!-- Instrucciones de configuraci贸n -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-cog"></i> Pasos de Configuraci贸n
                </div>
                <div class="card-body">
                    <ol>
                        <li>Crea una aplicaci贸n en Azure AD</li>
                        <li>Obt茅n tu Client ID y Client Secret</li>
                        <li>Crea un Report en Power BI</li>
                        <li>Configura las variables de entorno:
                            <ul>
                                <li><code>AZURE_CLIENT_ID</code></li>
                                <li><code>AZURE_CLIENT_SECRET</code></li>
                                <li><code>AZURE_TENANT_ID</code></li>
                                <li><code>POWERBI_REPORT_ID</code></li>
                                <li><code>POWERBI_WORKSPACE_ID</code></li>
                            </ul>
                        </li>
                        <li>Reinicia la aplicaci贸n</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <!-- rea de embebido de Power BI -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-eye"></i> Visualizaci贸n de Reportes
                </div>
                <div class="card-body">
                    <div id="powerbi-container" style="height: 600px; border: 1px solid #e5e7eb; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                        <div class="text-center">
                            <h4> rea de Reportes Power BI</h4>
                            <p class="text-muted">Los reportes de Power BI aparecer谩n aqu铆 una vez que configure las credenciales.</p>
                            <p class="text-muted"><small>Sigue los pasos de configuraci贸n anteriores para habilitar la integraci贸n.</small></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Informaci贸n de conexi贸n -->
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-database"></i> Datos Disponibles
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success"></i> Dispensadoras</li>
                        <li><i class="fas fa-check text-success"></i> Lecturas de Sensores</li>
                        <li><i class="fas fa-check text-success"></i> Alertas</li>
                        <li><i class="fas fa-check text-success"></i> Mantenimiento</li>
                        <li><i class="fas fa-check text-success"></i> Consumo de Agua</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-link"></i> API Disponible
                </div>
                <div class="card-body">
                    <ul class="list-unstyled" style="font-family: monospace; font-size: 0.85rem;">
                        <li><code>/api/dispensadoras</code></li>
                        <li><code>/api/lecturas/&lt;id&gt;</code></li>
                        <li><code>/api/alertas</code></li>
                        <li><code>/api/estadisticas</code></li>
                        <li><code>/api/status</code></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
